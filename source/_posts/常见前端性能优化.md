title: 前端优化
date: 2015-6-19 11:36:42
tags: "前端优化"
categories: "前端性能优化"
---
### 高清图适配优化
##### 纯色图『2X』
一般是类似icon的图片,在网站中会用到的地方也非常的多,当此类小icon数量比较少的话,sprite图是一种解决方案.
但如果会用到许多此类图片时,全部合并成 sprite 图，图片的 K 数也会很大，而且后期如果有修改的话还得重新合并 sprite 图,
所以这种情况推荐使用iconfont图标.我一般用[阿里巴巴矢量图标库](http://iconfont.cn/)
##### 非纯色图
非纯色图通常用『2X』图适配，适配方案可以有很多选择：媒体查询、srcset属性、image-set属性、脚本控制。
``` javascript
<img src="images/demo@1x.png" srcset="images/demo@1x.png 1x, images/demo@2x.png 2x" alt="">
```
``` css
.chain_item_icon{
    background-image: -webkit-image-set(url("images/demo@1x.png") 1x, url("images/demo@2x.png") 2x);
    background-image: image-set(url("images/demo@1x.png") 1x, url("images/demo@2x.png") 2x);
}
```
##### 设计类字体
设计类字体的实现只能用图片或通过样式 @font-face 属性去实现
* 图片方案：虽然可以高精度还原，兼容性强，但是每改动一处地方都需要换图，不方便维护，内容扩展性差，而且如果要适配高清设备，又得多一套图。
* @font-face 属性方案：字体具有矢量性，高清设备可以轻松适配，内容扩展性强，但是不同的浏览器存在渲染的差异，兼容性略弱，@font-face 字体文件大小一般又是 M 级别，会不同程度影响页面加载体验。
推荐[Fontmin](http://ecomfe.github.io/fontmin/tw#feature)
### 压缩源码或者图片
js文件源代码可以采用混淆压缩的方式，
css文件的源代码可以进行普通的压缩，
<!-- more -->
JPG图片可以根据具体的质量来压缩为50%-70%，
PNG图片可以使用一些压缩软件来压缩，比如24色变成8色，去掉一些PNG格式信息等。
### 选择合适的图片格式
如果图片的颜色数较多就用JPG格式，
如果图片的颜色数较少就用PNG格式，
如果能通过服务器端判断浏览器支持webP，那就用webP和SVG格式
### 合并静态资源
包括CSS js 和小图片，减少http请求
### 开启服务器端的Gzip压缩
这对文本资源非常有效，对图片资源没多大的压缩比率
### 使用CDN
或则一些公开库使用第三方提供的静态资源地址（jquery angular）。这样一方面增加并发下载量，另一方面能够和其他网站共享缓存
### 延长静态资源缓存时间
这里要注意，要通过修改文件名的方式，确保在资源更新的时候，用户可以拉到最新的内容（时间戳 版本号）
### 小细节
把css放在头部  把js放在页面底部
